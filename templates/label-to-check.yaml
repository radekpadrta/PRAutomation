parameters:
  - name: labelToCheck
    type: string
  - name: variableName
    type: string

steps:
- task: Bash@3
  displayName: 'Check for ${{ parameters.labelToCheck }} label'
  inputs:
    targetType: 'inline'
    script: |
      create_env_found=false
      
      label0="${{parameters.WebhookPRtest.pull_request.labels[0].name}}"
      label1="${{parameters.WebhookPRtest.pull_request.labels[1].name}}"
      label2="${{parameters.WebhookPRtest.pull_request.labels[2].name}}"
      label3="${{parameters.WebhookPRtest.pull_request.labels[3].name}}"
      label4="${{parameters.WebhookPRtest.pull_request.labels[4].name}}"
      label5="${{parameters.WebhookPRtest.pull_request.labels[5].name}}"
      for label in "$label0" "$label1" "$label2" "$label3" "$label4" "$label5"; do
        echo "Processing label: $label"
        if [[ "$label" == "${{ parameters.labelToCheck }}" ]]; then
          create_env_found=true
          break
        fi
      done
      if $create_env_found; then
        echo "##vso[task.setvariable variable=${{ parameters.variableName }}]true"
      else
        echo "##vso[task.setvariable variable=${{ parameters.variableName }}]false"
      fi